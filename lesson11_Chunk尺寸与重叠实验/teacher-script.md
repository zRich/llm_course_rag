# Lesson 11 讲稿（Teacher Script）

## 时间轴与流程
- 0–10 min：导入与目标说明（Chunk 尺寸与重叠的意义）。
- 10–30 min：概念讲解（影响因素、中文场景、评估指标）。
- 30–75 min：实践环节（三组配置端到端实验，记录与对比）。
- 75–90 min：总结与提交（推荐区间、边界与后续课承接）。

## 开场话术（可照读）
- 今天我们围绕检索增强系统的分块策略开展实验，目标是在中文语料里找到合适的 `CHUNK_SIZE` 与 `CHUNK_OVERLAP`。我们会完成至少三组配置的端到端验证，并以数据支撑结论，为后续缓存优化打基础。

## 核心术语与定义
- Chunk：文档分块的最小处理单元，用于向量化与检索。
- Overlap：相邻块的重叠长度，用于提升跨块语义连续性。
- Token/Char Count：分块的长度统计，用于评价尺寸适配度。
- Recall/Total Found：检索返回的候选总数或召回能力指标。
- Context Window：问答系统构建上下文的窗口大小，受分块影响。

## 演示脚本（逐步）
1) 打开 `.env` 展示当前 `CHUNK_SIZE` 与 `CHUNK_OVERLAP`。
2) 修改为第一组配置（如 `1000/200`），保存。
3) 运行向量化：`POST /api/v1/vectors/vectorize` 或项目提供的脚本；完成后运行检索与问答。
4) 记录响应：分块统计（数量、平均 token/char）、检索 `total_found`、问答来源质量（引用与答案一致性）。
5) 重复第二组、第三组配置；强调必须重向量化。
6) 对比三组结果，汇总到模板，得出推荐区间与理由。

## 互动与提问（参考答案）
- 问：是否应始终增大 `CHUNK_SIZE`？
  - 答：不一定。过大可能包含冗余上下文并稀释向量表示，降低精确匹配。
- 问：`CHUNK_OVERLAP` 太小或太大有什么影响？
  - 答：太小导致跨句跨段信息丢失；太大引入大量冗余，影响存储与检索效率。

## 常见误区与应对话术
- 误区：修改配置未重向量化。应强调“改配置→重分块与重向量化”。
- 误区：只看召回数量不验证来源质量。应检查 `sources` 是否与答案一致。
- 误区：忽略中文断句边界。应说明文本分割器策略与段落边界影响。

## 总结与提交
- 总结：中文场景推荐区间通常在 `600..1500` 尺寸、`100..300` 重叠（需结合语料与模型维度调参）。
- 提交：按模板填写三组配置、日志与结论，附典型响应片段与截图；提交 PR。