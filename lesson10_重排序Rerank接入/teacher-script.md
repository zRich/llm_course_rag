# Lesson 10 教师讲稿：重排序（Rerank）接入

## 开场（3-5min）
- 目标：把 Rerank 接口接入到检索管道，在过滤候选上做稳定重排。
- 产物：可运行示例、指标对比（MRR/nDCG）、已填写提交模板与错误路径截图。

## 术语与背景（5min）
- Rerank：用更强模型对候选做精细打分（如 Cross-Encoder）。
- 分数融合：基线分数 + Rerank 分数的线性加权与归一化。
- 稳定排序：分数并列的可复现打断规则。

## 方法讲解（25min）
1) 接口抽象与回退策略（无依赖时启发式）。
2) 归一化与融合公式、`alpha/top_k` 的影响。
3) 指标：MRR/nDCG 的含义与计算；为何只对前 K 重排。
4) 错误结构：参数非法与依赖失败的统一返回与提示。

## 演示脚本（40min 实操）
- 运行 `examples/rerank_demo.py`：
  - 基线排序 vs 重排序对比；
  - 切换 `alpha/top_k`；
  - （可选）加 `--use_ce` 启用 Cross-Encoder；
  - 注入错误：`--alpha 1.5` / `--top_k -1`，观察错误结构。

## 互动提问（贯穿）
- Cross vs Bi 的本质差异？
- 为何需要归一化与稳定排序？
- Top-K 应该如何选择？

## 练习安排（10-15min）
- 学生修改参数并复测指标，记录结论与截图。

## 总结与提交（5-10min）
- 对照 `checklist.md` 核查要点；提交模板填写完整；不可虚构声明。
- 下节将基于重排结果进行答案抽取与拼接。