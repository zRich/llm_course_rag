# 实验手册编写最佳实践（通用版）

本文件规定实验手册（面向学生的操作指南）的统一体例、开发流程与验收规范，确保学生按手册一步一步执行即可独立完成实验并产出预期效果；同时保证与课程主线契约一致。

## 适用范围
- 适用于各类编程课程的实验手册编写，包括但不限于：Web开发、数据科学、机器学习、系统编程等。
- 与模块/课时文档解耦，实验手册独立存放并在课程文档中引用。
- 支持不同技术栈和编程语言的实验设计。

## 核心原则（强制要求）
1) **操作导向**：实验手册是指导学生操作的详细操作手册，逐步清晰、可直接执行。
2) **充分详实**：手册必须充分详实，学生可按步骤完成实验并达到预期产出与验收阈值。
3) **独立性**：实验具有独立性，不依赖其他实验的产出；手册需显式写明独立运行的前置条件（环境/数据/账号）。
4) **代码分层**：代码必须区分"完整版代码"与"学生版代码"：
   - **完整版代码（Full）**：实验涉及到的所有步骤均已实现、可运行、可通过验收；用于教师演示与基线验证。
   - **学生版代码（Student）**：由完整代码复制后，将"实验任务所需完成的关键代码"删除，并用 `TODO` 占位与注释替换；用于学生动手完成。
5) **明确任务**：每个实验必须有明确的"实验任务"（可测量、可验收的目标），并在手册首页显著呈现。
6) **开发流程**：开发流程必须遵循：先开发"完整版代码"，通过测试与验收后，再派生"学生版代码"。
7) **TODO规范**：学生版代码的开发严格遵循：从完整代码复制→删除关键补充→以 `TODO` 占位替换→补充注释指导与验收脚本。
8) **答案提供**：学生版实验必须提供"答案文件"，并存放在对应课程目录下，命名与实验编号一致。

## 目录与命名规范
- **代码目录**：
  - 完整版：`labs/full/labXX/`（可执行、可验收，附验证脚本）
  - 学生版：`labs/student/labXX/`（含 `TODO` 占位与注释，附最小运行脚本）
- **手册文档**：`lessons/<id>-<topic>/lab.md` 或模块文档内对应实验段落链接至本手册。
- **实验编号**：统一编号格式 `labXX`，建议跨模块连续编号。
- **课堂示例**：可放置于 `lessons/<id>-<topic>/examples/`，仅用于讲解与对照，不计入实验代码与验收。
- **答案文件**：`lessons/<id>-<topic>/labXX-answer.md`（学生版实验必须提供答案文件）。

### 包与环境管理（推荐）
- **Python项目**：使用 `uv` 管理；目录包含 `pyproject.toml`。
- **Node.js项目**：使用 `npm` 管理；目录包含 `package.json`。
- **其他语言**：按照对应语言的包管理最佳实践。

### 与历史实验对齐
- 保持实验编号的一致性和连续性。
- 完整版代码与学生版代码分别存放，便于维护和更新。
- 弃用声明：避免在课程目录下直接放置实验代码，统一使用 `labs/` 目录结构。

### 迁移指引
- 若仓库存在历史实验目录，请将其中的文档与产出文件迁移至标准目录结构。
- 在模块文档中更新引用路径。

## 手册结构模板
```md
# labXX：实验名称（独立可运行）

## 实验任务（明确、可测量）
- **主要目标**：描述实验的核心学习目标和技能要求
- **具体任务**：列出需要完成的具体功能或接口
- **验收标准**：明确的成功标准和评估指标

## 前置条件（独立性说明）
- **环境要求**：编程语言版本、开发工具、系统要求
- **依赖安装**：必要的库、框架、工具的安装方法
- **数据准备**：示例数据、测试数据的获取和准备
- **账号/密钥**：如需外部服务，提供获取方法或Mock方案

## 产出与验收
- **预期产出**：明确列出实验完成后应该产生的文件、功能或结果
- **验收标准**：具体的评估维度、指标和通过阈值
- **测试方法**：如何验证实验结果的正确性

## 实验步骤（逐步可执行）
### 步骤1：环境准备
- 安装命令、配置说明
- 预期输出与可能的错误处理

### 步骤2：核心实现
- 详细的实现指导
- 关键代码片段和解释
- 参数配置和调试方法

### 步骤3：测试验证
- 测试用例和预期结果
- 验证方法和工具使用

### 步骤4：结果记录
- 保存路径与文件命名规范
- 提交要求和格式说明

## 代码与版本
- **完整版代码**：路径 `labs/full/labXX/`，包含完整实现和验证脚本
- **学生版代码**：路径 `labs/student/labXX/`，包含以下 `TODO` 占位：
  - TODO-1：[功能模块] - 实现提示和要求
  - TODO-2：[参数配置] - 配置说明和注意事项
  - TODO-3：[验证逻辑] - 测试和验证的实现要点

## 常见问题与解决方案
- **环境问题**：常见的环境配置问题和解决方法
- **实现问题**：核心功能实现中的常见错误和调试技巧
- **验证问题**：测试不通过的常见原因和解决方案
- **兜底方案**：提供最小可运行替代或降级方案

## 扩展学习
- **相关概念**：实验涉及的核心概念和理论背景
- **进阶实践**：可选的扩展任务和深入学习方向
- **参考资源**：相关文档、教程和工具链接

## 边界声明
- 本实验专注于 [核心技能/概念]，不涉及 [排除内容]
- 相关的高级主题在后续实验或模块中处理
```

## 开发流程（Full → Student）
1. **需求分析**：设计实验任务与验收标准，确定核心学习目标和技能要求。
2. **完整实现**：开发完整版本（`labs/full/labXX/`），实现全部步骤，编写验证脚本和测试数据。
3. **测试验证**：本地运行验证，确保所有功能正常，验收标准达标；记录日志与截图。
4. **学生版派生**：复制为学生版（`labs/student/labXX/`）：
   - 逐项删除"实验任务关键实现"，保留结构与依赖
   - 以 `TODO` 明确占位，标注实现要求和提示
   - 在关键位置加入注释：实现指导、注意事项、验收要点
   - 保留最小运行脚本，确保学生能启动并定位任务
5. **手册编写**：完成实验手册，包含步骤说明、任务描述、验收标准、独立性说明；插入 TODO 清单与路径。
6. **学生测试**：确认学生按手册能够在限定时间完成，并通过验收标准。

## TODO 占位与注释约定
- **统一格式**：`// TODO(labXX): 描述任务与期望实现` 或 `# TODO(labXX): ...`
- **可检索性**：占位符需唯一且可通过正则快速定位（例如 `TODO(lab-\d{2})`）
- **伴随注释**：提供输入/输出示例、边界条件、错误处理与验收提示
- **分级指导**：根据难度提供不同层次的实现提示

## 验收与评估标准
### 通用评估维度
- **功能完整性**：核心功能是否按要求实现
- **代码质量**：代码结构、命名规范、注释完整性
- **测试覆盖**：是否包含必要的测试用例和验证
- **文档完整**：README、注释、使用说明是否完备

### 量化指标示例
- **功能测试**：核心功能测试通过率 ≥ 95%
- **代码规范**：符合项目编码规范 ≥ 90%
- **文档质量**：关键功能有清晰说明和示例

### 不可虚构声明
- 不得编造未实现的接口/指标，所有验收标准须可复现
- 提供的示例和测试数据必须真实有效
- 验证脚本必须能够准确反映实验完成情况

## 提交前检查清单
- [ ] 手册步骤完整且可执行，包含必要的命令、输出与说明
- [ ] 明确"实验任务"与验收标准，预期产出清晰
- [ ] 完整版代码可运行并通过验证脚本
- [ ] 学生版代码由完整版复制，关键实现用 `TODO` 占位并附注释
- [ ] 独立性说明到位：不依赖其他实验产出或提供替代方案
- [ ] 错误处理与兜底策略明确，可指导学生定位与修复问题
- [ ] 提供答案文件，路径和命名符合规范
- [ ] 验收标准可测量、可复现，不包含虚构内容

## 版本控制建议
- 在对应的课程开发分支中开发实验
- 完整版代码与学生版代码分别提交，提交信息须注明实验编号与变更要点
- 定期同步更新，确保实验内容与课程进度保持一致
- 建立实验版本标签，便于追踪和回滚

## 多语言和技术栈适配
### Python 实验
- 使用虚拟环境管理依赖
- 提供 `requirements.txt` 或 `pyproject.toml`
- 包含单元测试和集成测试

### JavaScript/Node.js 实验
- 使用 `package.json` 管理依赖
- 提供 `npm scripts` 用于常见操作
- 包含 Jest 或其他测试框架的测试用例

### 其他语言
- 按照对应语言的最佳实践组织项目结构
- 提供相应的构建和测试脚本
- 确保跨平台兼容性

## 质量保证
- **同行评审**：实验手册和代码需经过同行评审
- **学生试用**：在正式发布前进行小规模学生试用
- **持续改进**：根据学生反馈和教学效果持续优化
- **定期更新**：跟随技术发展和工具更新及时调整内容