# 课堂提问与练习（含参考答案）— Lesson 08 混合检索融合策略

## 提问（概念理解）
- 问：为什么在融合前需要对分数进行归一化？
  - 答：不同检索路的分值尺度不同（如 BM25 与余弦相似度），直接相加会导致一方主导。归一化（如 min-max）可将分数映射到统一区间以便公平融合。

- 问：RRF 与线性加权的主要差异是什么？
  - 答：RRF以名次为基础，强调头部稳定性与鲁棒性；线性加权依赖分值大小与权重设定，灵活但需做好归一化与参数调优。

## 提问（实践应用）
- 问：当两路结果出现大量重叠时，如何设计去重策略？
  - 答：优先使用唯一 `id`；若不可用，采用 `source+offset` 组合键。合并时保留更高的融合分数与更可信的来源。

- 问：融合后响应时间升高，如何优化？
  - 答：缩小 Top-K、并发两路检索、启用缓存、限制融合集合大小、做增量更新与渐进式展示。

## 练习
1) 调整权重 `w_k/w_v`（如 0.8/0.2、0.2/0.8），记录 Top-10 的变化并给出解释。
2) 修改 RRF 的 k 值（30/90/150），观察名次对融合结果的影响与稳定性。
3) 实现自定义去重键，并对同文档不同片段进行合理合并或保留策略。