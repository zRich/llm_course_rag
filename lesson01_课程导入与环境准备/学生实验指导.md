# Lesson 01 - è¯¾ç¨‹å¯¼å…¥ä¸ç¯å¢ƒå‡†å¤‡

## å®éªŒç›®æ ‡

é€šè¿‡æœ¬æ¬¡å®éªŒï¼Œä½ å°†ï¼š
- æ­å»ºå®Œæ•´çš„Pythonå¼€å‘ç¯å¢ƒ
- æŒæ¡uvä¾èµ–ç®¡ç†å·¥å…·çš„ä½¿ç”¨
- åˆ›å»ºåŸºç¡€çš„FastAPIåº”ç”¨
- äº†è§£ä¼ä¸šçº§å¼€å‘çš„æœ€ä½³å®è·µ

## ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+, æˆ– Linux
- **Pythonç‰ˆæœ¬**: >= 3.10
- **å†…å­˜**: è‡³å°‘ 4GB RAM
- **å­˜å‚¨**: è‡³å°‘ 2GB å¯ç”¨ç©ºé—´

### å¿…éœ€è½¯ä»¶
1. **Python 3.10+**
   - Windows: ä» [python.org](https://python.org) ä¸‹è½½å®‰è£…
   - macOS: ä½¿ç”¨ Homebrew `brew install python@3.10`
   - Linux: ä½¿ç”¨åŒ…ç®¡ç†å™¨ `sudo apt install python3.10`

2. **Git**
   - ä» [git-scm.com](https://git-scm.com) ä¸‹è½½å®‰è£…

3. **VSCode**
   - ä» [code.visualstudio.com](https://code.visualstudio.com) ä¸‹è½½å®‰è£…
   - å®‰è£…Pythonæ‰©å±•åŒ…

4. **Docker Desktop**ï¼ˆå¯é€‰ï¼Œä¸‹èŠ‚è¯¾ä½¿ç”¨ï¼‰
   - ä» [docker.com](https://docker.com) ä¸‹è½½å®‰è£…

## å®éªŒä¸€ï¼šç¯å¢ƒæ­å»ºä¸éªŒè¯

### æ­¥éª¤1ï¼šéªŒè¯Pythonç¯å¢ƒ

```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version
# æˆ–è€…
python3 --version

# ç¡®ä¿ç‰ˆæœ¬ >= 3.10
```

### æ­¥éª¤2ï¼šå®‰è£…uvä¾èµ–ç®¡ç†å·¥å…·

```bash
# ä½¿ç”¨pipå®‰è£…uv
pip install uv

# éªŒè¯å®‰è£…
uv --version
```

### æ­¥éª¤3ï¼šè·å–é¡¹ç›®ä»£ç 

æˆ‘ä»¬å°†ä½¿ç”¨Gitåˆ†æ”¯ç®¡ç†æ¥è·å–ä¸åŒè¯¾ç¨‹é˜¶æ®µçš„ä»£ç ã€‚é¦–å…ˆå…‹éš†é¡¹ç›®ä»“åº“ï¼š

```bash
# å…‹éš†é¡¹ç›®ä»“åº“
git clone <ä»“åº“åœ°å€> rag-system
cd rag-system

# åˆ‡æ¢åˆ°lesson01åˆ†æ”¯
git checkout lesson01

# éªŒè¯å½“å‰åˆ†æ”¯å’Œä»£ç çŠ¶æ€
git branch
ls -la
```

**è¯´æ˜**ï¼š
- é¡¹ç›®ä½¿ç”¨Gitåˆ†æ”¯ç®¡ç†ä¸åŒè¯¾ç¨‹é˜¶æ®µçš„ä»£ç 
- `lesson01`åˆ†æ”¯åŒ…å«ç¬¬ä¸€è¯¾çš„å®Œæ•´ä»£ç ç»“æ„
- åç»­è¯¾ç¨‹å°†åˆ‡æ¢åˆ°å¯¹åº”çš„åˆ†æ”¯ï¼ˆlesson02ã€lesson03ç­‰ï¼‰
- è¿™ç§æ–¹å¼é¿å…äº†æ‰‹åŠ¨å¤åˆ¶ä»£ç ï¼Œç¡®ä¿ä»£ç ç‰ˆæœ¬çš„ä¸€è‡´æ€§

### æ­¥éª¤4ï¼šåˆå§‹åŒ–Pythonè™šæ‹Ÿç¯å¢ƒ

```bash
# ä½¿ç”¨uvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
.venv\Scripts\activate

# macOS/Linux
source .venv/bin/activate

# éªŒè¯è™šæ‹Ÿç¯å¢ƒ
which python
# åº”è¯¥æ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒä¸­çš„Pythonè·¯å¾„
```

### æ­¥éª¤5ï¼šå®‰è£…åŸºç¡€ä¾èµ–

```bash
# å®‰è£…FastAPIå’ŒUvicorn
uv pip install fastapi uvicorn[standard]

# éªŒè¯å®‰è£…
python -c "import fastapi; print(fastapi.__version__)"
python -c "import uvicorn; print(uvicorn.__version__)"
```

## å®éªŒäºŒï¼šåˆ›å»ºåŸºç¡€FastAPIåº”ç”¨

### æ­¥éª¤1ï¼šåˆ›å»ºä¸»åº”ç”¨æ–‡ä»¶

åˆ›å»º `src/main.py` æ–‡ä»¶ï¼š

```python
from fastapi import FastAPI
from pydantic import BaseModel
from typing import List, Optional
import time

# åˆ›å»ºFastAPIåº”ç”¨å®ä¾‹
app = FastAPI(
    title="RAG System API",
    description="ä¼ä¸šçº§RAGç³»ç»Ÿæ¥å£ - ç¬¬ä¸€è¯¾æ¼”ç¤º",
    version="1.0.0",
    docs_url="/docs",
    redoc_url="/redoc"
)

# å®šä¹‰æ•°æ®æ¨¡å‹
class HealthResponse(BaseModel):
    status: str
    message: str
    timestamp: float

class QueryRequest(BaseModel):
    query: str
    max_results: Optional[int] = 5

class QueryResponse(BaseModel):
    answer: str
    sources: List[str]
    processing_time: float
    query: str

# æ ¹è·¯å¾„
@app.get("/", response_model=HealthResponse)
def root():
    """æ ¹è·¯å¾„ - è¿”å›æœåŠ¡åŸºæœ¬ä¿¡æ¯"""
    return HealthResponse(
        status="success",
        message="RAG System is running! è®¿é—® /docs æŸ¥çœ‹APIæ–‡æ¡£",
        timestamp=time.time()
    )

# å¥åº·æ£€æŸ¥æ¥å£
@app.get("/health", response_model=HealthResponse)
def health_check():
    """å¥åº·æ£€æŸ¥æ¥å£"""
    return HealthResponse(
        status="healthy",
        message="All systems operational",
        timestamp=time.time()
    )

# æŸ¥è¯¢æ¥å£ï¼ˆä¸´æ—¶å®ç°ï¼‰
@app.post("/query", response_model=QueryResponse)
def query_endpoint(request: QueryRequest):
    """æŸ¥è¯¢æ¥å£ - ä¸´æ—¶å®ç°ï¼Œåç»­è¯¾ç¨‹ä¼šå®Œå–„"""
    start_time = time.time()
    
    # æ¨¡æ‹Ÿå¤„ç†æ—¶é—´
    time.sleep(0.1)
    
    processing_time = time.time() - start_time
    
    return QueryResponse(
        answer=f"è¿™æ˜¯å¯¹æŸ¥è¯¢'{request.query}'çš„ä¸´æ—¶å›ç­”ã€‚åœ¨åç»­è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°çœŸæ­£çš„RAGæ£€ç´¢å’Œç”ŸæˆåŠŸèƒ½ã€‚",
        sources=[
            "ä¸´æ—¶æ•°æ®æº1 - ä¼ä¸šçŸ¥è¯†åº“",
            "ä¸´æ—¶æ•°æ®æº2 - æŠ€æœ¯æ–‡æ¡£",
            "ä¸´æ—¶æ•°æ®æº3 - æœ€ä½³å®è·µæŒ‡å—"
        ],
        processing_time=processing_time,
        query=request.query
    )

# è·å–ç³»ç»Ÿä¿¡æ¯
@app.get("/system/info")
def get_system_info():
    """è·å–ç³»ç»Ÿä¿¡æ¯"""
    import sys
    import platform
    
    return {
        "python_version": sys.version,
        "platform": platform.platform(),
        "fastapi_version": "å·²å®‰è£…",
        "status": "å¼€å‘ç¯å¢ƒå·²å°±ç»ª"
    }

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000, reload=True)
```

### æ­¥éª¤2ï¼šåˆ›å»ºå¯åŠ¨è„šæœ¬

åˆ›å»º `scripts/start_dev.py` æ–‡ä»¶ï¼š

```python
#!/usr/bin/env python3
"""
å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
"""

import uvicorn
import sys
import os

# æ·»åŠ srcç›®å½•åˆ°Pythonè·¯å¾„
sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..', 'src'))

def main():
    """å¯åŠ¨å¼€å‘æœåŠ¡å™¨"""
    print("ğŸš€ å¯åŠ¨RAGç³»ç»Ÿå¼€å‘æœåŠ¡å™¨...")
    print("ğŸ“– APIæ–‡æ¡£åœ°å€: http://127.0.0.1:8000/docs")
    print("ğŸ“‹ ReDocæ–‡æ¡£: http://127.0.0.1:8000/redoc")
    print("ğŸ”§ æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨")
    
    uvicorn.run(
        "main:app",
        host="127.0.0.1",
        port=8000,
        reload=True,
        reload_dirs=["src"],
        log_level="info"
    )

if __name__ == "__main__":
    main()
```

### æ­¥éª¤3ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶

åˆ›å»º `.env.example` æ–‡ä»¶ï¼š

```env
# åº”ç”¨é…ç½®
APP_NAME=RAG System
APP_VERSION=1.0.0
DEBUG=true

# æœåŠ¡å™¨é…ç½®
HOST=127.0.0.1
PORT=8000

# æ•°æ®åº“é…ç½®ï¼ˆåç»­è¯¾ç¨‹ä½¿ç”¨ï¼‰
DATABASE_URL=postgresql://rag:ragpass@localhost:5432/rag_db
REDIS_URL=redis://localhost:6379/0

# å‘é‡æ•°æ®åº“é…ç½®ï¼ˆåç»­è¯¾ç¨‹ä½¿ç”¨ï¼‰
QDRANT_URL=http://localhost:6333

# LLMé…ç½®ï¼ˆåç»­è¯¾ç¨‹ä½¿ç”¨ï¼‰
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
```

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¤åˆ¶ `.env.example`ï¼‰ï¼š

```bash
cp .env.example .env
```

### æ­¥éª¤4ï¼šåˆ›å»ºGitå¿½ç•¥æ–‡ä»¶

åˆ›å»º `.gitignore` æ–‡ä»¶ï¼š

```gitignore
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# è™šæ‹Ÿç¯å¢ƒ
.venv/
venv/
ENV/
env/

# ç¯å¢ƒå˜é‡
.env
.env.local
.env.*.local

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# æ“ä½œç³»ç»Ÿ
.DS_Store
Thumbs.db

# æ—¥å¿—æ–‡ä»¶
*.log
logs/

# æ•°æ®åº“
*.db
*.sqlite3

# ä¸´æ—¶æ–‡ä»¶
tmp/
temp/
```

## å®éªŒä¸‰ï¼šè¿è¡Œå’Œæµ‹è¯•åº”ç”¨

### æ­¥éª¤1ï¼šå¯åŠ¨åº”ç”¨

```bash
# æ–¹æ³•1ï¼šç›´æ¥è¿è¡Œ
cd src
python main.py

# æ–¹æ³•2ï¼šä½¿ç”¨uvicornå‘½ä»¤
uvicorn main:app --reload --host 127.0.0.1 --port 8000

# æ–¹æ³•3ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬
python scripts/start_dev.py
```

### æ­¥éª¤2ï¼šéªŒè¯åº”ç”¨è¿è¡Œ

1. **è®¿é—®æ ¹è·¯å¾„**
   - æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://127.0.0.1:8000
   - åº”è¯¥çœ‹åˆ°æ¬¢è¿ä¿¡æ¯

2. **æŸ¥çœ‹APIæ–‡æ¡£**
   - è®¿é—®: http://127.0.0.1:8000/docs
   - åº”è¯¥çœ‹åˆ°Swagger UIç•Œé¢

3. **æŸ¥çœ‹ReDocæ–‡æ¡£**
   - è®¿é—®: http://127.0.0.1:8000/redoc
   - åº”è¯¥çœ‹åˆ°ReDocç•Œé¢

### æ­¥éª¤3ï¼šæµ‹è¯•APIæ¥å£

#### ä½¿ç”¨æµè§ˆå™¨æµ‹è¯•

1. **å¥åº·æ£€æŸ¥**
   - è®¿é—®: http://127.0.0.1:8000/health

2. **ç³»ç»Ÿä¿¡æ¯**
   - è®¿é—®: http://127.0.0.1:8000/system/info

#### ä½¿ç”¨Swagger UIæµ‹è¯•

1. æ‰“å¼€ http://127.0.0.1:8000/docs
2. ç‚¹å‡» "POST /query" æ¥å£
3. ç‚¹å‡» "Try it out"
4. è¾“å…¥æµ‹è¯•æ•°æ®ï¼š
   ```json
   {
     "query": "ä»€ä¹ˆæ˜¯RAGç³»ç»Ÿï¼Ÿ",
     "max_results": 3
   }
   ```
5. ç‚¹å‡» "Execute" æ‰§è¡Œè¯·æ±‚
6. æŸ¥çœ‹å“åº”ç»“æœ

#### ä½¿ç”¨curlæµ‹è¯•ï¼ˆå¯é€‰ï¼‰

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://127.0.0.1:8000/health

# æµ‹è¯•æŸ¥è¯¢æ¥å£
curl -X POST "http://127.0.0.1:8000/query" \
     -H "Content-Type: application/json" \
     -d '{
       "query": "ä»€ä¹ˆæ˜¯RAGç³»ç»Ÿï¼Ÿ",
       "max_results": 3
     }'
```

## å®éªŒå››ï¼šä»£ç ä¼˜åŒ–å’Œæ‰©å±•

### æ­¥éª¤1ï¼šæ·»åŠ é…ç½®ç®¡ç†

åˆ›å»º `src/config.py` æ–‡ä»¶ï¼š

```python
from pydantic_settings import BaseSettings
from typing import Optional

class Settings(BaseSettings):
    """åº”ç”¨é…ç½®"""
    
    # åº”ç”¨åŸºæœ¬ä¿¡æ¯
    app_name: str = "RAG System"
    app_version: str = "1.0.0"
    debug: bool = True
    
    # æœåŠ¡å™¨é…ç½®
    host: str = "127.0.0.1"
    port: int = 8000
    
    # æ•°æ®åº“é…ç½®
    database_url: Optional[str] = None
    redis_url: Optional[str] = None
    
    # å‘é‡æ•°æ®åº“é…ç½®
    qdrant_url: Optional[str] = None
    
    # LLMé…ç½®
    openai_api_key: Optional[str] = None
    openai_base_url: str = "https://api.openai.com/v1"
    
    # æ—¥å¿—é…ç½®
    log_level: str = "INFO"
    
    class Config:
        env_file = ".env"
        env_file_encoding = "utf-8"

# åˆ›å»ºå…¨å±€é…ç½®å®ä¾‹
settings = Settings()
```

### æ­¥éª¤2ï¼šæ›´æ–°ä¸»åº”ç”¨æ–‡ä»¶

æ›´æ–° `src/main.py`ï¼Œä½¿ç”¨é…ç½®ç®¡ç†ï¼š

```python
from fastapi import FastAPI
from pydantic import BaseModel
from typing import List, Optional
import time
from config import settings

# ä½¿ç”¨é…ç½®åˆ›å»ºFastAPIåº”ç”¨å®ä¾‹
app = FastAPI(
    title=settings.app_name,
    description="ä¼ä¸šçº§RAGç³»ç»Ÿæ¥å£ - ç¬¬ä¸€è¯¾æ¼”ç¤º",
    version=settings.app_version,
    docs_url="/docs",
    redoc_url="/redoc",
    debug=settings.debug
)

# ... å…¶ä»–ä»£ç ä¿æŒä¸å˜ ...

# æ·»åŠ é…ç½®ä¿¡æ¯æ¥å£
@app.get("/system/config")
def get_config_info():
    """è·å–é…ç½®ä¿¡æ¯ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰"""
    return {
        "app_name": settings.app_name,
        "app_version": settings.app_version,
        "debug": settings.debug,
        "log_level": settings.log_level,
        "database_configured": bool(settings.database_url),
        "redis_configured": bool(settings.redis_url),
        "qdrant_configured": bool(settings.qdrant_url),
        "openai_configured": bool(settings.openai_api_key)
    }
```

### æ­¥éª¤3ï¼šå®‰è£…é¢å¤–ä¾èµ–

```bash
# å®‰è£…é…ç½®ç®¡ç†ä¾èµ–
uv pip install pydantic-settings

# å®‰è£…å¼€å‘å·¥å…·ï¼ˆå¯é€‰ï¼‰
uv pip install black isort mypy
```

## å®éªŒéªŒè¯

### æ£€æŸ¥æ¸…å•

- [ ] Python 3.10+ ç¯å¢ƒå·²å®‰è£…
- [ ] uv ä¾èµ–ç®¡ç†å·¥å…·å·²å®‰è£…
- [ ] é¡¹ç›®ç›®å½•ç»“æ„å·²åˆ›å»º
- [ ] è™šæ‹Ÿç¯å¢ƒå·²åˆ›å»ºå¹¶æ¿€æ´»
- [ ] FastAPI å’Œ Uvicorn å·²å®‰è£…
- [ ] åŸºç¡€åº”ç”¨ä»£ç å·²åˆ›å»º
- [ ] åº”ç”¨èƒ½å¤Ÿæ­£å¸¸å¯åŠ¨
- [ ] æ‰€æœ‰APIæ¥å£èƒ½å¤Ÿæ­£å¸¸è®¿é—®
- [ ] Swagger UI æ–‡æ¡£å¯ä»¥æ­£å¸¸æŸ¥çœ‹
- [ ] é…ç½®ç®¡ç†åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### åŠŸèƒ½æµ‹è¯•

1. **å¯åŠ¨æµ‹è¯•**
   ```bash
   python src/main.py
   # åº”è¯¥çœ‹åˆ°æœåŠ¡å™¨å¯åŠ¨ä¿¡æ¯
   ```

2. **æ¥å£æµ‹è¯•**
   - è®¿é—® http://127.0.0.1:8000 - åº”è¯¥è¿”å›æ¬¢è¿ä¿¡æ¯
   - è®¿é—® http://127.0.0.1:8000/health - åº”è¯¥è¿”å›å¥åº·çŠ¶æ€
   - è®¿é—® http://127.0.0.1:8000/docs - åº”è¯¥æ˜¾ç¤ºAPIæ–‡æ¡£

3. **æŸ¥è¯¢æµ‹è¯•**
   - åœ¨Swagger UIä¸­æµ‹è¯•POST /queryæ¥å£
   - åº”è¯¥è¿”å›æ¨¡æ‹Ÿçš„æŸ¥è¯¢ç»“æœ

## æ€è€ƒé¢˜

1. **ç¯å¢ƒç®¡ç†**
   - ä¸ºä»€ä¹ˆä¼ä¸šç¯å¢ƒä¸­æ›´æ¨è uv æˆ– poetry æ¥ç®¡ç†ä¾èµ–ï¼Œè€Œä¸æ˜¯ç›´æ¥ pip installï¼Ÿ
   - è™šæ‹Ÿç¯å¢ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ

2. **æŠ€æœ¯é€‰å‹**
   - FastAPI ç›¸æ¯” Flask å’Œ Django æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ
   - ä¸ºä»€ä¹ˆé€‰æ‹© FastAPI ä½œä¸º RAG ç³»ç»Ÿçš„åç«¯æ¡†æ¶ï¼Ÿ

3. **é…ç½®ç®¡ç†**
   - ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ .env æ–‡ä»¶ç®¡ç†é…ç½®ï¼Ÿ
   - åœ¨ä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä¸­å¦‚ä½•ç®¡ç†é…ç½®ï¼Ÿ

4. **APIè®¾è®¡**
   - ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Pydantic æ¨¡å‹å®šä¹‰è¯·æ±‚å’Œå“åº”ï¼Ÿ
   - è‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£æœ‰ä»€ä¹ˆä»·å€¼ï¼Ÿ

5. **æ¶æ„æ€è€ƒ**
   - æœ¬åœ°å¼€å‘ç¯å¢ƒä¸äº‘ç«¯éƒ¨ç½²ç¯å¢ƒå¯èƒ½ä¼šæœ‰ä»€ä¹ˆå·®å¼‚ï¼Ÿ
   - å¦‚ä½•ç¡®ä¿å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Ÿ

## å¸¸è§é—®é¢˜è§£å†³

### Q1: uv å®‰è£…å¤±è´¥
**é—®é¢˜**: `pip install uv` æŠ¥é”™
**è§£å†³æ–¹æ¡ˆ**:
```bash
# å‡çº§pip
python -m pip install --upgrade pip

# é‡æ–°å®‰è£…uv
pip install uv

# å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨conda
conda install -c conda-forge uv
```

### Q2: è™šæ‹Ÿç¯å¢ƒæ¿€æ´»å¤±è´¥
**é—®é¢˜**: `source .venv/bin/activate` ä¸å·¥ä½œ
**è§£å†³æ–¹æ¡ˆ**:
```bash
# Windowsç”¨æˆ·ä½¿ç”¨
.venv\Scripts\activate

# æˆ–è€…ä½¿ç”¨uvç›´æ¥è¿è¡Œ
uv run python src/main.py
```

### Q3: FastAPIå¯åŠ¨æŠ¥é”™
**é—®é¢˜**: å¯¼å…¥æ¨¡å—å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿åœ¨æ­£ç¡®çš„ç›®å½•
cd rag-course

# ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
source .venv/bin/activate

# é‡æ–°å®‰è£…ä¾èµ–
uv pip install fastapi uvicorn[standard]
```

### Q4: ç«¯å£è¢«å ç”¨
**é—®é¢˜**: `Address already in use`
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä½¿ç”¨ä¸åŒç«¯å£
uvicorn main:app --port 8001

# æˆ–è€…æ‰¾åˆ°å¹¶å…³é—­å ç”¨è¿›ç¨‹
# Windows
netstat -ano | findstr :8000
taskkill /PID <PID> /F

# macOS/Linux
lsof -ti:8000 | xargs kill -9
```

### Q5: é…ç½®æ–‡ä»¶ä¸ç”Ÿæ•ˆ
**é—®é¢˜**: .env æ–‡ä»¶ä¸­çš„é…ç½®æ²¡æœ‰è¢«è¯»å–
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿å®‰è£…äº†pydantic-settings
uv pip install pydantic-settings

# ç¡®ä¿.envæ–‡ä»¶åœ¨æ­£ç¡®ä½ç½®ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰
ls -la .env

# æ£€æŸ¥.envæ–‡ä»¶æ ¼å¼ï¼ˆä¸è¦æœ‰ç©ºæ ¼ï¼‰
APP_NAME=RAG System  # é”™è¯¯
APP_NAME="RAG System"  # æ­£ç¡®
```

## å‚è€ƒèµ„æ–™

### å®˜æ–¹æ–‡æ¡£
- [FastAPI å®˜æ–¹æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [uv ç”¨æˆ·æŒ‡å—](https://docs.astral.sh/uv/)
- [Pydantic æ–‡æ¡£](https://docs.pydantic.dev/)
- [Uvicorn æ–‡æ¡£](https://www.uvicorn.org/)

### å­¦ä¹ èµ„æº
- [Python è™šæ‹Ÿç¯å¢ƒæœ€ä½³å®è·µ](https://realpython.com/python-virtual-environments-a-primer/)
- [FastAPI æ•™ç¨‹ç³»åˆ—](https://fastapi.tiangolo.com/tutorial/)
- [ç°ä»£ Python å¼€å‘å·¥å…·é“¾](https://github.com/carlosperate/awesome-pyproject)

## å®éªŒå®Œæˆæ ‡å¿—

å½“ä½ å®Œæˆä»¥ä¸‹æ‰€æœ‰é¡¹ç›®æ—¶ï¼Œè¯´æ˜å®éªŒæˆåŠŸï¼š

âœ… **ç¯å¢ƒæ­å»ºå®Œæˆ**
- Python 3.10+ ç¯å¢ƒæ­£å¸¸
- uv å·¥å…·å®‰è£…æˆåŠŸ
- é¡¹ç›®è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå¹¶æ¿€æ´»

âœ… **åº”ç”¨å¼€å‘å®Œæˆ**
- FastAPI åº”ç”¨åˆ›å»ºæˆåŠŸ
- æ‰€æœ‰APIæ¥å£æ­£å¸¸å·¥ä½œ
- Swagger UI æ–‡æ¡£å¯ä»¥è®¿é—®

âœ… **é…ç½®ç®¡ç†å®Œæˆ**
- .env æ–‡ä»¶é…ç½®æ­£ç¡®
- é…ç½®ç±»æ­£å¸¸å·¥ä½œ
- æ•æ„Ÿä¿¡æ¯å¾—åˆ°ä¿æŠ¤

âœ… **æµ‹è¯•éªŒè¯å®Œæˆ**
- åº”ç”¨å¯åŠ¨æ— é”™è¯¯
- æ‰€æœ‰æ¥å£å“åº”æ­£å¸¸
- æ–‡æ¡£ç”Ÿæˆæ­£ç¡®

æ­å–œä½ å®Œæˆäº†ç¬¬ä¸€è¯¾çš„å®éªŒï¼ä½ å·²ç»æˆåŠŸæ­å»ºäº†ä¼ä¸šçº§RAGç³»ç»Ÿçš„åŸºç¡€å¼€å‘ç¯å¢ƒï¼Œå¹¶åˆ›å»ºäº†ç¬¬ä¸€ä¸ªFastAPIåº”ç”¨ã€‚åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨Dockerå®¹å™¨åŒ–è¿™ä¸ªåº”ç”¨ï¼Œå¹¶å¯åŠ¨RAGç³»ç»Ÿéœ€è¦çš„å„ç§ä¾èµ–æœåŠ¡ã€‚

## å®éªŒå®Œæˆåçš„Gitæ“ä½œ

### ä¸ºä»€ä¹ˆè¦è¿›è¡ŒGitæäº¤ï¼Ÿ

åœ¨å®Œæˆæ¯èŠ‚è¯¾çš„å®éªŒåï¼Œè¿›è¡ŒGitæäº¤æ˜¯éå¸¸é‡è¦çš„æœ€ä½³å®è·µï¼š

- **ç‰ˆæœ¬æ§åˆ¶**: è®°å½•ä½ çš„å­¦ä¹ è¿›åº¦å’Œä»£ç å˜æ›´å†å²
- **å¤‡ä»½ä¿æŠ¤**: é˜²æ­¢æ„å¤–ä¸¢å¤±ä½ çš„å®éªŒæˆæœ
- **é—®é¢˜è¿½è¸ª**: å½“å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥å›é€€åˆ°ä¹‹å‰çš„å·¥ä½œçŠ¶æ€
- **å­¦ä¹ è®°å½•**: ä¸ºä½ çš„å­¦ä¹ è¿‡ç¨‹å»ºç«‹å®Œæ•´çš„ç‰ˆæœ¬å†å²
- **å›¢é˜Ÿåä½œ**: åœ¨å›¢é˜Ÿç¯å¢ƒä¸­ï¼Œè‰¯å¥½çš„æäº¤ä¹ æƒ¯æ˜¯å¿…éœ€çš„

### Gitæäº¤æ“ä½œæ­¥éª¤

å®Œæˆæœ¬è¯¾å®éªŒåï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æäº¤ä½ çš„ä»£ç ï¼š

#### æ­¥éª¤1ï¼šæ£€æŸ¥å½“å‰çŠ¶æ€

```bash
# æŸ¥çœ‹å½“å‰GitçŠ¶æ€
git status

# æŸ¥çœ‹å…·ä½“çš„æ–‡ä»¶å˜æ›´
git diff
```

**è¯´æ˜**: `git status` ä¼šæ˜¾ç¤ºå“ªäº›æ–‡ä»¶è¢«ä¿®æ”¹ã€æ·»åŠ æˆ–åˆ é™¤ã€‚çº¢è‰²è¡¨ç¤ºæœªæš‚å­˜çš„æ›´æ”¹ï¼Œç»¿è‰²è¡¨ç¤ºå·²æš‚å­˜çš„æ›´æ”¹ã€‚

#### æ­¥éª¤2ï¼šæ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº

```bash
# æ·»åŠ æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶
git add .

# æˆ–è€…é€‰æ‹©æ€§æ·»åŠ ç‰¹å®šæ–‡ä»¶
git add src/main.py
git add src/config.py
git add .env.example

# å†æ¬¡æ£€æŸ¥çŠ¶æ€
git status
```

**è¯´æ˜**: `git add .` ä¼šæ·»åŠ å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶ã€‚å¦‚æœä½ åªæƒ³æäº¤ç‰¹å®šæ–‡ä»¶ï¼Œå¯ä»¥å•ç‹¬æŒ‡å®šæ–‡ä»¶è·¯å¾„ã€‚

#### æ­¥éª¤3ï¼šæäº¤æ›´æ”¹

```bash
# æäº¤æ›´æ”¹å¹¶æ·»åŠ æè¿°ä¿¡æ¯
git commit -m "å®Œæˆlesson01å®éªŒï¼šæ­å»ºFastAPIåŸºç¡€ç¯å¢ƒå’Œåº”ç”¨"

# æˆ–è€…ä½¿ç”¨æ›´è¯¦ç»†çš„æäº¤ä¿¡æ¯
git commit -m "å®Œæˆlesson01å®éªŒ

- æ­å»ºPython 3.10+å¼€å‘ç¯å¢ƒ
- å®‰è£…å¹¶é…ç½®uvä¾èµ–ç®¡ç†å·¥å…·
- åˆ›å»ºåŸºç¡€FastAPIåº”ç”¨å’ŒAPIæ¥å£
- å®ç°é…ç½®ç®¡ç†å’Œç¯å¢ƒå˜é‡å¤„ç†
- æ·»åŠ å¥åº·æ£€æŸ¥å’Œç³»ç»Ÿä¿¡æ¯æ¥å£
- å®Œæˆåº”ç”¨æµ‹è¯•å’ŒéªŒè¯"
```

**æäº¤ä¿¡æ¯å»ºè®®**:
- ä½¿ç”¨æ¸…æ™°ã€ç®€æ´çš„ä¸­æ–‡æè¿°
- ç¬¬ä¸€è¡Œç®€è¦è¯´æ˜ä¸»è¦å˜æ›´
- å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥æ·»åŠ è¯¦ç»†çš„å˜æ›´åˆ—è¡¨
- éµå¾ªå›¢é˜Ÿçš„æäº¤ä¿¡æ¯è§„èŒƒ

#### æ­¥éª¤4ï¼šéªŒè¯æäº¤ç»“æœ

```bash
# æŸ¥çœ‹æäº¤å†å²
git log --oneline -5

# æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡æäº¤çš„è¯¦ç»†ä¿¡æ¯
git show HEAD
```

### å¯é€‰ï¼šæ¨é€åˆ°è¿œç¨‹ä»“åº“

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è¿œç¨‹Gitä»“åº“ï¼ˆå¦‚GitHubã€GitLabç­‰ï¼‰ï¼Œå¯ä»¥å°†æäº¤æ¨é€åˆ°è¿œç¨‹ï¼š

```bash
# æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„å½“å‰åˆ†æ”¯
git push origin lesson01

# å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¨é€è¯¥åˆ†æ”¯
git push -u origin lesson01
```

### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### Q1: æäº¤æ—¶å‡ºç°"nothing to commit"é”™è¯¯
**åŸå› **: æ²¡æœ‰æ–‡ä»¶æ›´æ”¹æˆ–æ‰€æœ‰æ›´æ”¹å·²ç»æäº¤
**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ˜¯å¦æœ‰æœªè·Ÿè¸ªçš„æ–‡ä»¶
git status

# å¦‚æœæœ‰æ–°æ–‡ä»¶ï¼Œå…ˆæ·»åŠ å†æäº¤
git add .
git commit -m "ä½ çš„æäº¤ä¿¡æ¯"
```

#### Q2: æƒ³è¦ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ä¿¡æ¯
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤çš„ä¿¡æ¯
git commit --amend -m "æ–°çš„æäº¤ä¿¡æ¯"
```

#### Q3: ä¸å°å¿ƒæ·»åŠ äº†ä¸åº”è¯¥æäº¤çš„æ–‡ä»¶
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä»æš‚å­˜åŒºç§»é™¤æ–‡ä»¶ï¼ˆä½†ä¿ç•™æœ¬åœ°æ›´æ”¹ï¼‰
git reset HEAD æ–‡ä»¶å

# æˆ–è€…ç§»é™¤æ‰€æœ‰æš‚å­˜çš„æ–‡ä»¶
git reset HEAD
```

#### Q4: æƒ³è¦æŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„æ›´æ”¹å†å²
**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹æ–‡ä»¶çš„æäº¤å†å²
git log --follow -- src/main.py

# æŸ¥çœ‹æ–‡ä»¶çš„å…·ä½“æ›´æ”¹
git log -p -- src/main.py
```

### Gitæœ€ä½³å®è·µæé†’

1. **é¢‘ç¹æäº¤**: å®Œæˆä¸€ä¸ªåŠŸèƒ½ç‚¹å°±æäº¤ä¸€æ¬¡ï¼Œä¸è¦ç§¯ç´¯å¤ªå¤šæ›´æ”¹
2. **æ¸…æ™°ä¿¡æ¯**: æäº¤ä¿¡æ¯è¦æ¸…æ¥šåœ°æè¿°åšäº†ä»€ä¹ˆæ›´æ”¹
3. **æ£€æŸ¥å†æäº¤**: æäº¤å‰ç”¨ `git status` å’Œ `git diff` æ£€æŸ¥æ›´æ”¹
4. **å¿½ç•¥æ–‡ä»¶**: ç¡®ä¿ `.gitignore` æ–‡ä»¶æ­£ç¡®é…ç½®ï¼Œé¿å…æäº¤ä¸å¿…è¦çš„æ–‡ä»¶
5. **åˆ†æ”¯ç®¡ç†**: åœ¨æ­£ç¡®çš„åˆ†æ”¯ä¸Šå·¥ä½œå’Œæäº¤

### ä¸‹ä¸€æ­¥

å®ŒæˆGitæäº¤åï¼Œä½ å°±å¯ä»¥å®‰å…¨åœ°è¿›å…¥ä¸‹ä¸€è¯¾çš„å­¦ä¹ äº†ã€‚åœ¨lesson02ä¸­ï¼Œæˆ‘ä»¬å°†ï¼š
- åˆ‡æ¢åˆ° `lesson02` åˆ†æ”¯
- å­¦ä¹ Dockerå®¹å™¨åŒ–æŠ€æœ¯
- å¯åŠ¨RAGç³»ç»Ÿçš„ä¾èµ–æœåŠ¡

è®°ä½ï¼Œè‰¯å¥½çš„Gitä¹ æƒ¯æ˜¯è½¯ä»¶å¼€å‘çš„åŸºç¡€æŠ€èƒ½ï¼ŒåšæŒåœ¨æ¯èŠ‚è¯¾åè¿›è¡Œæäº¤ï¼Œä½ å°†å»ºç«‹èµ·å®Œæ•´çš„å­¦ä¹ å’Œå¼€å‘å†å²è®°å½•ã€‚