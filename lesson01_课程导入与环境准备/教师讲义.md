# Lesson 01 - 课程导入与环境准备

## 课程信息
- **课程名称**: 企业级RAG系统设计与实现
- **模块**: 模块A - 环境与最小可用RAG
- **课时**: 2学时
- **授课方式**: 理论讲解 + 实践操作

## 教学目标

### 知识目标
- 理解企业级RAG系统的整体架构和技术栈
- 掌握现代Python开发环境的搭建方法
- 了解容器化开发的优势和最佳实践

### 能力目标
- 能够独立搭建Python开发环境
- 能够使用uv进行依赖管理
- 能够创建基础的FastAPI应用

### 素质目标
- 培养规范的开发习惯
- 建立企业级开发的意识
- 养成使用最佳实践的习惯

## 教学重点与难点

### 教学重点
1. **企业级RAG系统架构概述**
   - 技术栈选择的原因和优势
   - 各组件的作用和关系
   - 开发流程和部署策略

2. **现代Python开发环境**
   - uv vs pip vs poetry的对比
   - 虚拟环境的重要性
   - 依赖管理最佳实践

3. **FastAPI基础应用**
   - FastAPI的优势和特点
   - 基础API开发
   - 自动文档生成

### 教学难点
1. **技术栈选择的理解**
   - 为什么选择这些技术
   - 各技术的适用场景
   - 企业级考虑因素

2. **环境配置的标准化**
   - 跨平台兼容性
   - 版本管理策略
   - 环境变量管理

## 教学内容

### 1. 课程导入（30分钟）

#### 1.1 RAG系统概述
- **什么是RAG（Retrieval-Augmented Generation）**
  - 检索增强生成的核心概念
  - 解决LLM知识局限性的方案
  - 企业应用场景和价值

- **企业级RAG系统特点**
  - 高可用性和可扩展性
  - 数据安全和隐私保护
  - 性能监控和运维管理
  - 多租户和权限控制

#### 1.2 技术栈介绍
- **后端框架**: FastAPI - 高性能异步Web框架
- **向量数据库**: Qdrant - 专业向量存储和检索
- **关系数据库**: PostgreSQL - 企业级数据存储
- **缓存系统**: Redis - 高性能内存数据库
- **对象存储**: MinIO - S3兼容的对象存储
- **容器化**: Docker - 环境一致性保障
- **监控系统**: Prometheus/Grafana - 系统监控和可视化

#### 1.3 开发流程概述
- 环境准备 → 容器化 → 数据建模 → 文档处理 → 向量化 → RAG实现
- 测试驱动开发（TDD）
- 持续集成和部署（CI/CD）

### 2. 环境准备（45分钟）

#### 2.1 基础环境要求
- **Python版本**: >= 3.12（支持最新语法特性）
- **开发工具**: VSCode + Python扩展
- **版本控制**: Git（代码管理）
- **容器平台**: Docker Desktop 或 Podman

#### 2.2 uv依赖管理工具
- **为什么选择uv**
  - 比pip快10-100倍的安装速度
  - 内置虚拟环境管理
  - 更好的依赖解析算法
  - 企业级锁定文件支持

- **uv vs 其他工具对比**
  ```
  | 特性 | pip | poetry | uv |
  |------|-----|--------|----|
  | 速度 | 慢 | 中等 | 极快 |
  | 依赖解析 | 基础 | 好 | 优秀 |
  | 锁定文件 | 无 | 有 | 有 |
  | 虚拟环境 | 手动 | 集成 | 集成 |
  ```

#### 2.3 环境变量管理
- **`.env`文件的重要性**
  - 敏感信息保护
  - 环境配置分离
  - 部署灵活性

- **最佳实践**
  - 使用`.env.example`作为模板
  - 敏感信息不提交到版本控制
  - 环境特定的配置文件

### 3. FastAPI入门（30分钟）

#### 3.1 FastAPI特点
- **高性能**: 基于Starlette和Pydantic
- **类型安全**: 原生支持Python类型提示
- **自动文档**: 自动生成OpenAPI/Swagger文档
- **异步支持**: 原生async/await支持

#### 3.2 基础应用结构
- 应用实例创建
- 路由定义
- 请求处理
- 响应格式化

#### 3.3 开发服务器
- Uvicorn的作用和配置
- 热重载功能
- 调试模式设置

### 4. 实践演示（15分钟）

#### 4.1 环境搭建演示
- uv安装和配置
- 项目初始化
- 依赖安装

#### 4.2 FastAPI应用创建
- 最小应用示例
- 启动和测试
- 文档访问

## 课堂互动设计

### 互动环节1：技术选型讨论（10分钟）
**问题**: "如果你是技术负责人，会如何选择RAG系统的技术栈？"
- 学生分组讨论
- 各组分享选型理由
- 教师点评和补充

### 互动环节2：环境问题解决（15分钟）
- 学生在搭建环境过程中遇到的问题
- 同学互助解决
- 教师指导和总结

### 互动环节3：FastAPI体验（10分钟）
- 学生尝试修改示例代码
- 添加新的API端点
- 观察自动文档的变化

## 课后作业

### 基础作业
1. **环境搭建**
   - 完成Python 3.12+环境安装
   - 安装并配置uv
   - 创建项目虚拟环境

2. **FastAPI练习**
   - 创建包含3个API端点的应用
   - 实现GET、POST请求处理
   - 添加请求参数验证

### 进阶作业
1. **技术调研**
   - 调研FastAPI与Flask、Django的对比
   - 分析uv与poetry的详细差异
   - 撰写500字技术选型报告

2. **环境优化**
   - 配置开发环境的最佳实践
   - 设置代码格式化工具（black、isort）
   - 配置类型检查工具（mypy）

## 评估标准

### 课堂表现（30%）
- 积极参与讨论
- 提出有价值的问题
- 协助同学解决问题

### 实验完成度（40%）
- 环境搭建成功
- FastAPI应用运行正常
- 代码规范性

### 作业质量（30%）
- 作业完成度
- 代码质量
- 技术理解深度

## 常见问题与解决方案

### Q1: uv安装失败
**解决方案**:
- 检查Python版本是否>=3.8
- 使用pip install uv --upgrade
- 考虑使用conda环境

### Q2: FastAPI启动报错
**解决方案**:
- 检查依赖是否正确安装
- 确认Python路径配置
- 查看详细错误信息

### Q3: 端口占用问题
**解决方案**:
- 使用不同端口启动
- 检查并关闭占用进程
- 配置端口映射

## 参考资料

### 官方文档
- [FastAPI官方文档](https://fastapi.tiangolo.com/)
- [uv官方文档](https://docs.astral.sh/uv/)
- [Python官方文档](https://docs.python.org/3/)

### 技术博客
- FastAPI最佳实践指南
- Python依赖管理工具对比
- 企业级Python开发环境配置

### 开源项目
- FastAPI示例项目
- 企业级Python项目模板
- RAG系统开源实现

## 下节课预告

**Lesson 02 - 容器化与依赖服务启动**
- Docker Compose多服务编排
- PostgreSQL、Redis、Qdrant等服务配置
- 服务间网络通信和数据持久化
- 开发环境与生产环境的差异处理

## 课程反思

### 教学效果评估
- 学生对技术栈的理解程度
- 环境搭建的成功率
- 课堂互动的活跃度

### 改进建议
- 根据学生反馈调整教学节奏
- 补充实际企业案例
- 增加动手实践时间