# RAG系统环境变量配置模板
# 复制此文件为 .env 并根据实际环境修改配置值

# ================================
# 应用基础配置
# ================================
APP_NAME=RAG Application
APP_VERSION=1.0.0
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO

# 服务端口配置
APP_PORT=8000
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# ================================
# 数据库配置
# ================================
# PostgreSQL主数据库
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=rag_db
POSTGRES_USER=rag
POSTGRES_PASSWORD=ragpass
DATABASE_URL=postgresql://rag:ragpass@localhost:5432/rag_db

# 数据库连接池配置
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ================================
# 缓存配置
# ================================
# Redis缓存
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://localhost:6379/0

# 缓存过期时间（秒）
CACHE_TTL=3600
SESSION_TTL=86400

# ================================
# 向量数据库配置
# ================================
# Qdrant向量数据库
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=

# 向量维度配置
VECTOR_DIMENSION=768
SIMILARITY_THRESHOLD=0.7

# ================================
# 对象存储配置
# ================================
# MinIO对象存储
MINIO_ENDPOINT=localhost:9000
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_SECURE=false
MINIO_BUCKET_NAME=rag-documents

# 文件上传配置
MAX_FILE_SIZE=100MB
ALLOWED_FILE_TYPES=pdf,docx,txt,md,html

# ================================
# AI模型配置
# ================================
# OpenAI配置
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# Hugging Face配置
HF_TOKEN=your_huggingface_token_here
HF_MODEL_NAME=sentence-transformers/all-MiniLM-L6-v2
HF_CACHE_DIR=./models

# 本地模型配置
LOCAL_MODEL_PATH=./models
USE_LOCAL_MODEL=false

# ================================
# 安全配置
# ================================
# JWT配置
SECRET_KEY=your_super_secret_key_here_change_in_production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS配置
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
ALLOWED_HEADERS=*

# 安全头配置
SECURITY_HEADERS=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# ================================
# 监控和日志配置
# ================================
# Prometheus监控
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# Grafana配置
GRAFANA_PORT=3000
GRAFANA_PASSWORD=admin

# Sentry错误追踪
SENTRY_DSN=your_sentry_dsn_here
SENTRY_ENVIRONMENT=development

# 日志配置
LOG_FORMAT=json
LOG_FILE_PATH=./logs/app.log
LOG_ROTATION=1 day
LOG_RETENTION=30 days

# ================================
# 任务队列配置
# ================================
# Celery配置
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json

# 任务配置
DOCUMENT_PROCESSING_QUEUE=document_processing
EMBEDDING_GENERATION_QUEUE=embedding_generation
MAX_CONCURRENT_TASKS=4

# ================================
# 搜索和检索配置
# ================================
# 搜索参数
DEFAULT_SEARCH_LIMIT=10
MAX_SEARCH_LIMIT=100
SEARCH_TIMEOUT=30

# 文档分块配置
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MIN_CHUNK_SIZE=100

# ================================
# 开发和测试配置
# ================================
# 测试数据库
TEST_DATABASE_URL=postgresql://rag:ragpass@localhost:5432/rag_test_db

# 开发工具
RELOAD=true
DEBUG_TOOLBAR=true
PROFILER_ENABLED=false

# API文档配置
DOCS_URL=/docs
REDOC_URL=/redoc
OPENAPI_URL=/openapi.json

# ================================
# 生产环境配置
# ================================
# 性能配置
WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=1000
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100

# SSL配置
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem
SSL_ENABLED=false

# 备份配置
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=rag-backups

# ================================
# 功能开关
# ================================
# 功能标志
ENABLE_USER_REGISTRATION=true
ENABLE_DOCUMENT_UPLOAD=true
ENABLE_BATCH_PROCESSING=true
ENABLE_REAL_TIME_SEARCH=true
ENABLE_ANALYTICS=false

# 实验性功能
EXPERIMENTAL_FEATURES=false
BETA_FEATURES=false