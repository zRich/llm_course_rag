# Lesson 07 边界与不可虚构声明

## 课程边界声明

### 本课程涵盖范围

#### ✅ 明确包含的内容
1. **关键词检索基础**
   - PostgreSQL全文检索功能使用
   - tsvector和tsquery的基本操作
   - GIN索引的创建和使用
   - 中文全文检索配置

2. **中文分词技术**
   - jieba分词库的安装和使用
   - 精确模式、全模式、搜索引擎模式的区别
   - 自定义词典的基本使用
   - 分词结果的后处理

3. **关键词检索实现**
   - 查询预处理函数 `preprocess_query()`
   - 关键词检索函数 `keyword_search()`
   - 基本的错误处理和异常管理
   - 简单的性能监控

4. **与向量检索的对比**
   - 两种检索方式的优缺点分析
   - 适用场景的基本判断
   - 检索结果的差异性分析

#### ❌ 明确不包含的内容
1. **高级全文检索特性**
   - 复杂的查询语法 (如短语查询、邻近查询)
   - 自定义排序算法
   - 多语言混合检索
   - 同义词扩展和查询重写

2. **深度分词优化**
   - 自定义分词算法开发
   - 领域特定词典构建
   - 分词准确率的深度调优
   - 新词发现和动态词典更新

3. **高级性能优化**
   - 分布式检索架构
   - 缓存策略设计
   - 索引分片和负载均衡
   - 实时索引更新机制

4. **企业级功能**
   - 权限控制和安全认证
   - 多租户支持
   - 审计日志和监控告警
   - 高可用性和容灾备份

### 技术深度边界

#### 🎯 适当深度 (本课程目标)
- **概念理解**：理解关键词检索的基本原理和适用场景
- **基础实现**：能够实现基本的关键词检索功能
- **简单优化**：掌握基本的查询预处理和结果过滤
- **对比分析**：能够比较关键词检索和向量检索的差异

#### ⚠️ 过深内容 (超出范围)
- **算法原理**：倒排索引的底层实现细节
- **数据结构**：B-tree和GIN索引的内部结构
- **系统优化**：PostgreSQL内核参数调优
- **分布式架构**：多节点检索集群设计

#### ⚠️ 过浅内容 (低于要求)
- **纯理论讲解**：只讲概念不做实践
- **简单调用**：只会调用API不理解原理
- **复制粘贴**：只会复制代码不会修改
- **缺乏对比**：不理解不同检索方式的区别

## 实验边界声明

### 实验环境限制

#### 🔧 支持的环境
- **操作系统**：macOS, Linux, Windows 10+
- **Python版本**：3.8, 3.9, 3.10
- **PostgreSQL版本**：12.0+
- **内存要求**：≥ 4GB可用内存
- **存储要求**：≥ 2GB可用空间

#### ❌ 不支持的环境
- **Python版本**：< 3.8 或 > 3.10
- **PostgreSQL版本**：< 12.0
- **内存限制**：< 2GB可用内存
- **网络限制**：无法访问PyPI的环境
- **权限限制**：无法安装软件包的环境

### 数据集边界

#### 📊 提供的数据
- **中文文档集**：约1000篇技术文档
- **测试查询集**：50个预定义查询
- **预期结果集**：对应的标准答案
- **性能基准**：参考性能指标

#### ❌ 不提供的数据
- **大规模数据集**：> 10万篇文档的数据集
- **多语言数据**：英文、日文等非中文数据
- **实时数据**：需要实时更新的动态数据
- **敏感数据**：包含个人信息或商业机密的数据

### 功能实现边界

#### ✅ 必须实现的功能
1. **查询预处理**
   ```python
   def preprocess_query(query: str) -> List[str]:
       """查询预处理，返回关键词列表"""
       # 必须包含：分词、去停用词、长度过滤
   ```

2. **关键词检索**
   ```python
   def keyword_search(query: str, limit: int = 10) -> Dict[str, Any]:
       """关键词检索，返回相关文档"""
       # 必须包含：SQL查询、结果排序、错误处理
   ```

3. **基础测试**
   ```python
   def test_keyword_search():
       """测试关键词检索功能"""
       # 必须包含：正常查询、边界情况、错误处理
   ```

#### ⚠️ 可选实现的功能
- **查询扩展**：同义词替换和查询重写
- **结果高亮**：搜索关键词在结果中的高亮显示
- **相关性调优**：自定义相关性评分算法
- **缓存机制**：查询结果的内存缓存

#### ❌ 不要求实现的功能
- **用户界面**：Web界面或GUI应用
- **API服务**：RESTful API或GraphQL接口
- **认证授权**：用户登录和权限管理
- **监控告警**：系统监控和异常告警

## 评估边界声明

### 评估标准限制

#### 📏 明确的评估标准
1. **功能完整性** (40%)
   - 预处理函数正确实现
   - 检索函数正确实现
   - 错误处理机制完善
   - 测试用例通过率

2. **代码质量** (30%)
   - 代码结构清晰
   - 命名规范合理
   - 注释文档完整
   - 类型提示正确

3. **性能表现** (20%)
   - 查询响应时间 ≤ 200ms
   - 检索准确率 ≥ 85%
   - 内存使用合理
   - 错误率 ≤ 5%

4. **文档质量** (10%)
   - README文档完整
   - 函数文档字符串
   - 使用说明清晰
   - 测试结果记录

#### ❌ 不会评估的内容
- **界面美观性**：不涉及UI设计评估
- **部署复杂性**：不考虑生产环境部署
- **商业价值**：不评估商业应用潜力
- **创新性**：不要求算法创新或技术突破

### 提交要求边界

#### ✅ 必须提交的文件
```
lab07_submission/
├── keyword_search.py          # 核心实现文件
├── test_keyword_search.py     # 测试文件
├── requirements.txt           # 依赖列表
├── README.md                  # 说明文档
├── config.py                  # 配置文件
└── results/                   # 测试结果
    ├── test_output.txt        # 测试输出
    └── performance_report.md  # 性能报告
```

#### ❌ 不需要提交的文件
- **数据文件**：原始文档数据 (已提供)
- **日志文件**：运行时日志 (临时文件)
- **缓存文件**：jieba分词缓存 (自动生成)
- **IDE文件**：.vscode, .idea等配置文件

### 时间边界声明

#### ⏰ 课堂时间分配
- **理论讲解**：30分钟 (概念、对比、原理)
- **演示操作**：20分钟 (PostgreSQL、jieba、实现)
- **学生实践**：60分钟 (编码、测试、调试)
- **总结讨论**：10分钟 (问题、总结、预告)

#### ⏰ 课后时间预期
- **环境准备**：30分钟 (安装、配置、测试)
- **功能实现**：2-3小时 (编码、调试、优化)
- **测试验证**：1小时 (测试、文档、提交)
- **总计时间**：3.5-4.5小时

#### ❌ 时间边界警告
- **不要超时**：单个功能实现不应超过1小时
- **不要过度优化**：基础功能优先，避免过度工程化
- **不要偏离主线**：专注核心功能，避免功能蔓延

## 依赖边界声明

### 允许使用的库

#### ✅ 必需依赖
```python
import psycopg2          # PostgreSQL数据库连接
import jieba             # 中文分词
import re                # 正则表达式
import json              # JSON处理
import time              # 时间处理
import logging           # 日志记录
```

#### ✅ 可选依赖
```python
import pytest            # 测试框架
import numpy             # 数值计算 (如果需要)
import pandas            # 数据处理 (如果需要)
import typing            # 类型提示
```

#### ❌ 禁止使用的库
```python
# 高级搜索引擎
import elasticsearch     # 过于复杂
import solr              # 超出范围
import whoosh            # 不是主流选择

# 机器学习库
import tensorflow        # 不涉及深度学习
import torch             # 不涉及神经网络
import sklearn           # 不涉及传统ML

# 重型框架
import django            # Web框架超出范围
import flask             # API开发不是重点
import fastapi           # 同上
```

### 外部服务边界

#### ✅ 允许的外部服务
- **PostgreSQL数据库**：本地或Docker实例
- **PyPI包管理**：pip install安装依赖
- **GitHub仓库**：获取课程材料和示例

#### ❌ 禁止的外部服务
- **云搜索服务**：AWS CloudSearch, Azure Search等
- **第三方API**：百度搜索API、Google Search API等
- **商业软件**：Oracle数据库、SQL Server等
- **付费服务**：任何需要付费的外部服务

## 不可虚构声明

### 🚫 严禁虚构的内容

#### 技术细节虚构
- **性能数据**：不得编造响应时间、吞吐量等性能指标
- **测试结果**：不得伪造测试通过率、准确率等数据
- **错误信息**：不得编造不存在的错误类型或解决方案
- **版本信息**：不得虚构软件版本号或兼容性信息

#### 功能特性虚构
- **API接口**：不得描述不存在的函数或方法
- **配置选项**：不得介绍不存在的配置参数
- **数据格式**：不得定义不支持的数据结构
- **集成方式**：不得描述不可行的系统集成方案

#### 学习资源虚构
- **参考文献**：所有引用的论文、书籍必须真实存在
- **在线资源**：所有提供的链接必须可访问
- **示例代码**：所有代码示例必须经过测试验证
- **最佳实践**：所有建议必须基于实际经验

### ✅ 必须基于事实的内容

#### 技术规范
- **PostgreSQL文档**：基于官方文档的准确描述
- **jieba文档**：基于官方GitHub仓库的准确信息
- **Python标准**：基于PEP规范的准确实现
- **SQL标准**：基于ANSI SQL的标准语法

#### 性能基准
- **实测数据**：所有性能数据必须来自实际测试
- **环境说明**：明确说明测试环境和条件
- **对比基准**：提供可重现的对比测试方法
- **局限性说明**：诚实说明测试的局限性

#### 学习建议
- **难度评估**：基于实际教学经验的难度判断
- **时间预估**：基于多次实践的时间统计
- **常见问题**：基于真实学生反馈的问题总结
- **解决方案**：基于验证有效的解决方法

### 🔍 事实验证要求

#### 代码验证
- **语法检查**：所有代码必须通过语法检查
- **功能测试**：所有功能必须通过单元测试
- **集成测试**：所有集成必须通过端到端测试
- **性能测试**：所有性能声明必须有测试支撑

#### 文档验证
- **链接检查**：所有外部链接必须可访问
- **版本检查**：所有版本信息必须准确
- **兼容性检查**：所有兼容性声明必须验证
- **示例检查**：所有示例必须可运行

---

## 边界遵守承诺

### 教师承诺
- **内容准确性**：保证所有教学内容的准确性和时效性
- **范围控制**：严格控制教学内容在声明边界内
- **质量保证**：确保所有示例代码和演示的可重现性
- **诚实透明**：对不确定或超出能力范围的内容明确说明

### 学生期望
- **边界理解**：理解并接受课程内容的边界限制
- **专注学习**：专注于边界内的核心知识点学习
- **合理预期**：对学习成果保持合理预期
- **诚实实践**：在实验中诚实记录结果，不虚构数据

### 违反边界的后果
- **教学质量下降**：超出边界可能导致教学深度不足
- **学习效果受损**：边界外内容可能分散学习注意力
- **评估不公平**：边界外要求可能导致评估标准不一致
- **时间资源浪费**：边界外探索可能占用核心学习时间

### 边界调整机制
- **反馈收集**：定期收集学生和教师的边界反馈
- **内容评估**：定期评估边界设置的合理性
- **动态调整**：根据实际情况适当调整边界范围
- **版本控制**：记录边界调整的历史和原因