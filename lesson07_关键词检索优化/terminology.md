# Lesson 07 术语与概念定义

## 核心概念定义

### 1. 关键词检索 (Keyword Search)
**定义**：基于精确词汇匹配的文本检索方法，通过识别查询中的关键词并在文档中寻找相同或相关词汇来返回结果。

**特征**：
- 基于词汇级别的精确匹配
- 不考虑语义相似性
- 检索结果可解释性强
- 计算效率高

**应用场景**：法律文档检索、技术手册查找、专业术语搜索

### 2. 向量检索 (Vector Search)
**定义**：基于语义相似度的检索方法，将文档和查询转换为高维向量，通过计算向量间的相似度来返回相关结果。

**特征**：
- 基于语义理解
- 支持同义词和相关概念匹配
- 计算成本较高
- 结果相关性基于模型训练

**对比**：与关键词检索互补，各有适用场景

### 3. 全文检索 (Full-Text Search)
**定义**：在大量文本数据中快速查找包含特定词汇或短语的文档的技术。

**核心组件**：
- 文本预处理（分词、标准化）
- 倒排索引构建
- 查询处理和匹配
- 相关性评分

**PostgreSQL实现**：通过tsvector、tsquery和GIN索引实现

## 技术术语

### 4. tsvector
**定义**：PostgreSQL中用于全文检索的数据类型，存储文档的预处理文本向量。

**结构**：包含词汇（lexeme）及其在文档中的位置信息

**示例**：
```sql
SELECT to_tsvector('chinese', '人工智能技术发展');
-- 结果：'人工智能':1 '技术':2 '发展':3
```

**用途**：提高检索性能，支持复杂查询操作

### 5. tsquery
**定义**：PostgreSQL中表示全文检索查询的数据类型，支持逻辑操作符。

**操作符**：
- `&`：AND操作，要求所有词汇都匹配
- `|`：OR操作，任一词汇匹配即可
- `!`：NOT操作，排除特定词汇
- `<->`：距离操作，指定词汇间的距离

**示例**：
```sql
SELECT to_tsquery('chinese', '人工智能 & 医疗');
-- 查找同时包含"人工智能"和"医疗"的文档
```

### 6. GIN索引 (Generalized Inverted Index)
**定义**：PostgreSQL中专门为全文检索优化的索引类型，基于倒排索引原理。

**特点**：
- 支持包含关系查询（@@操作符）
- 对于多值字段（如tsvector）性能优异
- 索引大小相对较小
- 更新成本较高

**创建语法**：
```sql
CREATE INDEX idx_name ON table_name USING GIN(column_name);
```

### 7. 中文分词 (Chinese Word Segmentation)
**定义**：将连续的中文文本切分成有意义的词汇单元的过程。

**必要性**：
- 中文没有天然的词汇分隔符
- 分词质量直接影响检索效果
- 不同分词策略适用于不同场景

**常用工具**：jieba、HanLP、LTP、pkuseg

### 8. jieba分词
**定义**：基于统计和规则的中文分词Python库。

**分词模式**：
- **精确模式**：`cut(text, cut_all=False)`，尽量不重复切分
- **全模式**：`cut(text, cut_all=True)`，切分出所有可能词汇
- **搜索引擎模式**：`cut_for_search(text)`，在精确模式基础上进一步切分

**优势**：
- 安装简单，使用方便
- 支持自定义词典
- 性能较好，适合大规模应用

## 评估标准术语

### 9. 检索准确率 (Precision)
**定义**：检索结果中相关文档的比例。

**计算公式**：
```
Precision = 相关文档数 / 检索到的文档总数
```

**意义**：衡量检索结果的精确性，值越高表示无关结果越少

### 10. 检索召回率 (Recall)
**定义**：相关文档中被检索到的比例。

**计算公式**：
```
Recall = 检索到的相关文档数 / 相关文档总数
```

**意义**：衡量检索的完整性，值越高表示遗漏的相关文档越少

### 11. F1分数 (F1 Score)
**定义**：准确率和召回率的调和平均数。

**计算公式**：
```
F1 = 2 × (Precision × Recall) / (Precision + Recall)
```

**用途**：综合评估检索系统性能的单一指标

### 12. 相关性得分 (Relevance Score)
**定义**：衡量文档与查询相关程度的数值。

**PostgreSQL实现**：
- `ts_rank()`：基于词汇频率和文档长度
- `ts_rank_cd()`：考虑词汇密度的排序

**影响因素**：
- 词汇匹配数量
- 词汇在文档中的位置
- 文档长度
- 词汇重要性权重

## 性能指标术语

### 13. 响应时间 (Response Time)
**定义**：从发起查询到返回结果所需的时间。

**测量单位**：毫秒(ms)或秒(s)

**影响因素**：
- 数据库索引效率
- 查询复杂度
- 数据量大小
- 系统负载

**目标值**：单次查询 ≤ 200ms

### 14. 吞吐量 (Throughput)
**定义**：系统在单位时间内能处理的查询数量。

**测量单位**：QPS (Queries Per Second)

**影响因素**：
- 系统硬件配置
- 数据库连接池大小
- 查询优化程度
- 并发处理能力

### 15. 并发数 (Concurrency)
**定义**：系统能同时处理的查询请求数量。

**考虑因素**：
- 数据库连接限制
- 内存使用情况
- CPU处理能力
- I/O性能瓶颈

## 错误处理术语

### 16. 查询超时 (Query Timeout)
**定义**：查询执行时间超过预设阈值时的处理机制。

**设置原因**：
- 防止长时间查询占用资源
- 提高系统响应性
- 避免系统阻塞

**处理策略**：
- 返回部分结果
- 提示用户优化查询
- 记录日志用于分析

### 17. 连接池 (Connection Pool)
**定义**：预先创建并维护的数据库连接集合，用于复用连接资源。

**优势**：
- 减少连接创建开销
- 控制并发连接数
- 提高系统性能
- 便于连接管理

**配置参数**：
- 最小连接数
- 最大连接数
- 连接超时时间
- 空闲连接回收时间

## 系统架构术语

### 18. 倒排索引 (Inverted Index)
**定义**：以词汇为键，包含该词汇的文档列表为值的索引结构。

**结构示例**：
```
词汇 -> 文档列表
"人工智能" -> [doc1, doc3, doc5]
"医疗" -> [doc2, doc3, doc4]
"应用" -> [doc1, doc2, doc5]
```

**优势**：
- 快速定位包含特定词汇的文档
- 支持复杂的布尔查询
- 空间效率高

### 19. 混合检索 (Hybrid Search)
**定义**：结合多种检索方法（如关键词检索和向量检索）的综合检索策略。

**结合方式**：
- **并行检索**：同时执行多种检索，合并结果
- **级联检索**：先用一种方法筛选，再用另一种精化
- **加权融合**：根据不同方法的置信度加权合并

**优势**：发挥各种检索方法的优势，提高整体效果

### 20. 查询扩展 (Query Expansion)
**定义**：在原始查询基础上添加相关词汇以提高检索效果的技术。

**扩展方法**：
- 同义词扩展
- 相关词扩展
- 历史查询分析
- 用户反馈学习

**应用场景**：
- 提高召回率
- 处理用户输入错误
- 优化长尾查询效果

---

## 术语使用规范

### 命名约定
- **函数命名**：使用下划线分隔的小写字母（如：`preprocess_query`）
- **变量命名**：描述性命名，避免缩写（如：`keywords`而非`kw`）
- **常量命名**：全大写字母，下划线分隔（如：`MAX_QUERY_LENGTH`）

### 错误信息规范
- **用户友好**：使用通俗易懂的语言
- **具体明确**：指出具体的错误原因
- **提供建议**：给出解决问题的建议
- **统一格式**：保持错误信息格式一致

### 文档注释规范
- **函数说明**：描述功能、参数、返回值、异常
- **参数说明**：类型、含义、取值范围、默认值
- **示例代码**：提供典型使用示例
- **注意事项**：特殊情况和限制条件

---

## 参考资料

### 官方文档
- [PostgreSQL全文检索文档](https://www.postgresql.org/docs/current/textsearch.html)
- [jieba分词GitHub](https://github.com/fxsjy/jieba)

### 学术资源
- 信息检索导论 (Introduction to Information Retrieval)
- 现代信息检索 (Modern Information Retrieval)

### 在线资源
- PostgreSQL中文社区
- Python中文社区
- 自然语言处理相关博客和教程