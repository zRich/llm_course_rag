# 实验1：RAG系统基础搭建实验（Lesson 1-6）

## 实验概述

本实验是RAG实战课程的第一个综合实验，旨在帮助学生搭建一个最小可用的RAG系统。通过本实验，学生将掌握RAG系统的基础架构和核心功能实现。

## 实验目标

- 搭建完整的开发环境和项目结构
- 实现Docker容器化部署
- 完成PDF文档解析和文本分块功能
- 实现文档向量化和基础检索功能
- 构建简单的问答接口

## 涉及课程

- **Lesson 1**：课程导入与环境准备
- **Lesson 2**：容器化与依赖服务启动
- **Lesson 3**：数据模型与迁移
- **Lesson 4**：PDF解析与Chunk拆分
- **Lesson 5**：Embedding与向量入库
- **Lesson 6**：最小检索与生成

## 技术栈

- **Python 3.12.x**：主要开发语言
- **FastAPI**：Web框架
- **PostgreSQL**：关系数据库
- **Qdrant**：向量数据库
- **Redis**：缓存系统
- **Docker**：容器化部署
- **uv**：Python包管理器

## 实验环境要求

### 软件要求
- Python 3.12.x
- Docker Desktop
- Git
- uv包管理器

### 硬件要求
- 内存：至少8GB
- 存储：至少10GB可用空间
- 网络：稳定的互联网连接

## 实验步骤

### 第一阶段：环境准备（Lesson 1-2）

1. **项目初始化**
   - 使用uv创建项目
   - 配置pyproject.toml
   - 设置环境变量

2. **容器化部署**
   - 配置docker-compose.yml
   - 启动PostgreSQL、Redis、Qdrant服务
   - 验证服务连接

### 第二阶段：数据建模（Lesson 3）

1. **数据模型设计**
   - 定义Document模型
   - 定义Chunk模型
   - 创建数据库迁移

2. **数据库初始化**
   - 运行数据库迁移
   - 验证表结构

### 第三阶段：文档处理（Lesson 4）

1. **PDF解析功能**
   - 实现PDF文档读取
   - 提取文本内容
   - 处理文档元数据

2. **文本分块功能**
   - 实现文本分块算法
   - 配置分块参数
   - 处理重叠策略

### 第四阶段：向量化（Lesson 5）

1. **Embedding生成**
   - 集成Embedding模型
   - 实现批量向量化
   - 向量存储到Qdrant

2. **向量索引**
   - 创建向量集合
   - 配置索引参数
   - 验证向量存储

### 第五阶段：检索与生成（Lesson 6）

1. **检索功能**
   - 实现向量相似度检索
   - 配置检索参数
   - 结果排序和过滤

2. **生成功能**
   - 集成LLM API
   - 设计Prompt模板
   - 实现问答接口

## 交付物

### 必需交付物

1. **完整的项目代码**
   - 项目结构清晰
   - 代码规范符合要求
   - 包含必要的配置文件

2. **可运行的RAG系统**
   - 能够启动所有服务
   - 支持PDF文档上传
   - 能够进行基础问答

3. **实验报告**
   - 实验过程记录
   - 遇到的问题和解决方案
   - 系统功能验证截图

### 可选交付物

1. **性能测试报告**
   - 文档处理速度
   - 检索响应时间
   - 系统资源使用情况

2. **功能扩展**
   - 支持更多文档格式
   - 优化用户界面
   - 添加日志记录

## 评估标准

### 基础功能（70分）

- [ ] 环境搭建成功（10分）
- [ ] 容器化部署正常（10分）
- [ ] 数据模型正确（10分）
- [ ] PDF解析功能正常（15分）
- [ ] 向量化功能正常（15分）
- [ ] 基础问答功能正常（10分）

### 代码质量（20分）

- [ ] 代码结构清晰（5分）
- [ ] 命名规范（5分）
- [ ] 注释完整（5分）
- [ ] 错误处理（5分）

### 实验报告（10分）

- [ ] 实验过程完整（5分）
- [ ] 问题分析深入（3分）
- [ ] 总结反思（2分）

## 常见问题

### 环境配置问题

**Q: Docker服务启动失败？**
A: 检查端口占用情况，确保5432、6333、6379端口可用。

**Q: Python依赖安装失败？**
A: 尝试使用国内镜像源，或检查网络连接。

### 功能实现问题

**Q: PDF解析出现乱码？**
A: 检查PDF文档编码，尝试不同的解析库。

**Q: 向量检索结果不准确？**
A: 检查Embedding模型配置和向量维度设置。

## 参考资源

- [FastAPI官方文档](https://fastapi.tiangolo.com/)
- [Qdrant文档](https://qdrant.tech/documentation/)
- [Docker Compose文档](https://docs.docker.com/compose/)
- [uv使用指南](https://github.com/astral-sh/uv)

## 实验时间安排

- **准备阶段**：1-2小时（环境搭建）
- **开发阶段**：8-10小时（功能实现）
- **测试阶段**：2-3小时（功能验证）
- **报告撰写**：1-2小时

**总计**：12-17小时

## 提交要求

1. **代码提交**：将完整项目代码提交到Git仓库
2. **演示视频**：录制系统功能演示视频（5-10分钟）
3. **实验报告**：提交详细的实验报告（PDF格式）

## 后续实验预告

完成本实验后，学生将进入实验2：检索优化实验，学习如何优化RAG系统的检索性能和准确性。

## 边界与对齐

- 范围：仅覆盖 Lesson 1-6 的环境准备、容器化与依赖服务、数据建模、PDF解析与分块、嵌入生成与最小检索/生成。
- 不包含：关键词检索优化、融合策略、元数据过滤 DSL、重排序（Rerank）、认证与权限、并发与缓存策略优化、工程化部署与可靠性演练（分别在实验2-5完成）。
- 承接关系：
  - 实验2（Lesson 7-10）：检索优化与融合、过滤、重排序。
  - 实验3（Lesson 11-14）：分块对比、并行与多源、可溯源与缓存策略。
  - 实验4（Lesson 15-18）：数据管道、网关治理、容器化与CI/CD。
  - 实验5（Lesson 19-20）：监控告警、故障注入与灾备演练。